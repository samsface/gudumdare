[gd_scene load_steps=7 format=3 uid="uid://dj2ebg7r37paw"]

[ext_resource type="PackedScene" uid="uid://cpljr016pccwd" path="res://cards/card.tscn" id="1_t1di5"]
[ext_resource type="Texture2D" uid="uid://bdnks4gpk781e" path="res://battle/units/sprites/worm_samurai_card_art.png" id="2_hot8j"]
[ext_resource type="PackedScene" uid="uid://d0gai6a7radmv" path="res://battle/units/effect_rain.tscn" id="3_kpceh"]
[ext_resource type="Texture2D" uid="uid://dgr7ggakdl3b4" path="res://cards/card.png" id="4_vob44"]

[sub_resource type="Shader" id="Shader_trstd"]
code = "shader_type spatial;
uniform sampler2D texture;

uniform float mana;
uniform float cost;

void fragment() {
	ALPHA = texture(texture, UV).a;
	float pct = mana / cost;
	ALPHA *= smoothstep(pct, pct, UV.y) * 0.8;
	ALBEDO = vec3(0.0);
}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_6k0xl"]
resource_local_to_scene = true
render_priority = 0
shader = SubResource("Shader_trstd")
shader_parameter/mana = 10.0
shader_parameter/cost = null
shader_parameter/texture = ExtResource("4_vob44")

[node name="StaticBody3D" instance=ExtResource("1_t1di5")]
card_name = "Rain"
art = ExtResource("2_hot8j")
spawns = ExtResource("3_kpceh")
mana_cost = 3
tier = 2
sidelay = true
spawn_region = 1

[node name="Card" parent="." index="1"]
modulate = Color(0.117647, 0.564706, 1, 1)

[node name="CardLoading" parent="." index="2"]
material_override = SubResource("ShaderMaterial_6k0xl")

[node name="CardNameLabel" parent="." index="3"]
text = "Rain"

[node name="TierLabel" parent="." index="4"]
modulate = Color(0.0588235, 0.282353, 0.5, 0.5)
text = "STRONG"

[node name="ManaCost" parent="MeshInstance3D3" index="0"]
text = "3"

[node name="Art" parent="." index="6"]
texture = ExtResource("2_hot8j")
